---
/**
 * users.astro
 * Panel de Administración - Gestión de Usuarios
 * Solo accesible para personal autorizado
 */
import Layout from "@/layouts/Layout.astro";
import StatCard from "@/components/ui/StatCard.astro";
import InfoCard from "@/components/common/InfoCard.astro";
import AdminHeader from "./_components/AdminHeader.astro";
import UsersTable from "./_components/UsersTable.astro";

import users from "./_components/users";

// Estadísticas generales
const totalUsers = users.length;
const activeUsers = users.filter((u) => u.status === "active").length;
const suspendedUsers = users.filter((u) => u.status === "suspended").length;
const totalPoints = users.reduce((sum, u) => sum + u.points, 0);
---

<Layout title="Panel de Administración - Usuarios" showHeader={true}>
  <div class="container-lab py-8">
    <AdminHeader />

    <!-- Estadísticas generales -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
      <StatCard value={totalUsers} label="Total Usuarios" color="gradient" />
      <StatCard value={activeUsers} label="Activos" color="green" />
      <StatCard value={suspendedUsers} label="Suspendidos" color="red" />
      <StatCard value={totalPoints} label="Puntos Totales" color="primary" />
    </div>

    <UsersTable users={users} />

    <!-- Información del sistema -->
    <div class="mt-8 grid md:grid-cols-2 gap-6">
      <InfoCard title="Información del Sistema">
        <div class="space-y-2 text-sm text-slate-400">
          <div class="flex justify-between">
            <span>Versión del Sistema:</span>
            <span class="text-white">v1.0.0</span>
          </div>
          <div class="flex justify-between">
            <span>Última Actualización:</span>
            <span class="text-white">2026-01-20</span>
          </div>
          <div class="flex justify-between">
            <span>Registros Auditados:</span>
            <span class="text-white">1,247</span>
          </div>
          <div class="flex justify-between">
            <span>Accesos Hoy:</span>
            <span class="text-green-400">42</span>
          </div>
        </div>
      </InfoCard>

      <InfoCard title="Actividad Reciente">
        <div class="space-y-2 text-sm">
          <div class="flex items-center gap-2 text-slate-400">
            <span class="w-2 h-2 rounded-full bg-green-400"></span>
            <span>admin inició sesión - hace 2 horas</span>
          </div>
          <div class="flex items-center gap-2 text-slate-400">
            <span class="w-2 h-2 rounded-full bg-blue-400"></span>
            <span>Nuevo usuario registrado - hace 5 horas</span>
          </div>
          <div class="flex items-center gap-2 text-slate-400">
            <span class="w-2 h-2 rounded-full bg-yellow-400"></span>
            <span>Usuario suspendido - hace 1 día</span>
          </div>
        </div>
      </InfoCard>
    </div>
  </div>
</Layout>
